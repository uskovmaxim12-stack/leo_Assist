<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leo Assistant - –ü–∞–Ω–µ–ª—å —É—á–µ–Ω–∏–∫–∞</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-rgb: 59, 130, 246;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        
        .priority-high { color: var(--danger); }
        .priority-medium { color: var(--warning); }
        .priority-low { color: var(--success); }
        
        .task-done { opacity: 0.6; text-decoration: line-through; }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .system-navigation {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            background: var(--card-bg);
            padding: 10px;
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .nav-btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--background);
            color: var(--text);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .nav-btn:hover {
            background: rgba(var(--primary-rgb), 0.1);
            border-color: var(--primary);
        }
        
        .nav-btn.admin {
            background: rgba(217, 70, 239, 0.1);
            border-color: #d946ef;
        }
        
        .nav-btn.admin:hover {
            background: rgba(217, 70, 239, 0.2);
        }
        
        .nav-btn.logout {
            background: rgba(239, 68, 68, 0.1);
            border-color: #ef4444;
        }
        
        .nav-btn.logout:hover {
            background: rgba(239, 68, 68, 0.2);
        }
    </style>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="dashboard">
        <!-- –°–∞–π–¥–±–∞—Ä -->
        <aside class="dashboard-sidebar">
            <div class="sidebar-header">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">–ú–£</div>
                    <div class="user-details">
                        <h3 id="userName">–ú–∞–∫—Å–∏–º –£—Å–∫–æ–≤</h3>
                        <span class="role" id="userRole">–£—á–µ–Ω–∏–∫ 7–ë</span>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-section="overview">
                    <i class="fas fa-home"></i> –û–±–∑–æ—Ä
                </a>
                <a href="#" class="nav-item" data-section="ai-chat">
                    <i class="fas fa-robot"></i> AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç
                    <span class="nav-badge" id="aiUnread">0</span>
                </a>
                <a href="#" class="nav-item" data-section="schedule">
                    <i class="fas fa-calendar-alt"></i> –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                </a>
                <a href="#" class="nav-item" data-section="tasks">
                    <i class="fas fa-tasks"></i> –ó–∞–¥–∞–Ω–∏—è
                    <span class="nav-badge" id="tasksCount">3</span>
                </a>
                <a href="#" class="nav-item" data-section="progress">
                    <i class="fas fa-chart-line"></i> –ü—Ä–æ–≥—Ä–µ—Å—Å
                </a>
                <a href="#" class="nav-item" data-section="game">
                    <i class="fas fa-gamepad"></i> –ò–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞
                </a>
                <a href="#" class="nav-item" data-section="rating">
                    <i class="fas fa-trophy"></i> –†–µ–π—Ç–∏–Ω–≥ –∫–ª–∞—Å—Å–∞
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="quick-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="statPoints">0</div>
                        <div class="stat-label">–û—á–∫–∏</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statLevel">1</div>
                        <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statRank">-</div>
                        <div class="stat-label">–ú–µ—Å—Ç–æ</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="dashboard-main">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1 id="greetingText">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
                    <p id="currentDate">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>
                <div class="header-right">
                    <button class="btn-icon" id="notificationsBtn" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
                        <i class="fas fa-bell"></i>
                        <span class="badge" id="notificationsCount">0</span>
                    </button>
                    <button class="btn-icon" id="toggleSidebar" title="–°–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </header>

            <div class="dashboard-content" id="dashboardContent">
                <!-- –°–µ–∫—Ü–∏—è –û–±–∑–æ—Ä -->
                <div class="content-section active" id="section-overview">
                    <div class="widgets-grid">
                        <!-- AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç -->
                        <div class="widget widget-primary">
                            <div class="widget-header">
                                <h3><i class="fas fa-robot"></i> –ë—ã—Å—Ç—Ä—ã–π –≤–æ–ø—Ä–æ—Å</h3>
                            </div>
                            <div class="widget-body">
                                <div class="ai-quick-chat">
                                    <input type="text" id="quickQuestion" placeholder="–°–ø—Ä–æ—Å–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å...">
                                    <button id="askQuickBtn" class="btn-small">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                                <div id="quickAnswer" class="ai-answer"></div>
                            </div>
                        </div>

                        <!-- –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞–Ω–∏—è -->
                        <div class="widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-tasks"></i> –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞–Ω–∏—è</h3>
                                <a href="#" class="widget-link" data-section="tasks">–í—Å–µ</a>
                            </div>
                            <div class="widget-body">
                                <div class="tasks-list" id="upcomingTasks">
                                    <div class="task-item">
                                        <div class="task-info">
                                            <div class="task-subject">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</div>
                                            <div class="task-title">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞–Ω–∏–π...</div>
                                        </div>
                                        <button class="btn-small btn-complete" disabled>
                                            <i class="fas fa-check"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è -->
                        <div class="widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-calendar-day"></i> –°–µ–≥–æ–¥–Ω—è</h3>
                            </div>
                            <div class="widget-body">
                                <div class="today-schedule" id="todaySchedule">
                                    <div class="schedule-item">
                                        <div class="lesson-time">9:00</div>
                                        <div class="lesson-info">
                                            <div class="lesson-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                            <div class="lesson-room">-</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å -->
                        <div class="widget widget-chart">
                            <div class="widget-header">
                                <h3><i class="fas fa-chart-line"></i> –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
                            </div>
                            <div class="widget-body">
                                <div class="progress-chart">
                                    <canvas id="progressChart" width="300" height="150"></canvas>
                                </div>
                                <div class="chart-stats">
                                    <div class="chart-stat">
                                        <div class="stat-value" id="completedTasks">0</div>
                                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                                    </div>
                                    <div class="chart-stat">
                                        <div class="stat-value" id="pointsEarned">0</div>
                                        <div class="stat-label">–û—á–∫–æ–≤</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°–µ–∫—Ü–∏—è AI –ß–∞—Ç–∞ -->
                <div class="content-section" id="section-ai-chat">
                    <div class="widget widget-full">
                        <div class="widget-header">
                            <h3><i class="fas fa-robot"></i> AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –õ–µ–æ</h3>
                            <div class="widget-actions">
                                <button class="btn-icon" id="clearChat" title="–û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="widget-body">
                            <div class="ai-chat-container">
                                <div class="chat-messages" id="chatMessages">
                                    <div class="chat-message ai-message">
                                        <div class="chat-avatar">ü§ñ</div>
                                        <div class="chat-content">
                                            <div class="chat-text">
                                                –ü—Ä–∏–≤–µ—Ç! –Ø –õ–µ–æ, —Ç–≤–æ–π AI –ø–æ–º–æ—â–Ω–∏–∫. –ú–æ–≥—É –ø–æ–º–æ—á—å —Å —É—á–µ–±–æ–π, –∑–∞–¥–∞–Ω–∏—è–º–∏ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–±–æ–ª—Ç–∞—Ç—å!
                                            </div>
                                            <div class="chat-time">–¢–æ–ª—å–∫–æ —á—Ç–æ</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="chat-input">
                                    <input type="text" id="chatInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                                    <button id="sendMessage" class="btn-primary">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°–µ–∫—Ü–∏—è –†–µ–π—Ç–∏–Ω–≥–∞ -->
                <div class="content-section" id="section-rating">
                    <div class="widget widget-full">
                        <div class="widget-header">
                            <h3><i class="fas fa-trophy"></i> –†–µ–π—Ç–∏–Ω–≥ 7–ë –∫–ª–∞—Å—Å–∞</h3>
                            <span class="user-rank">–í–∞—à–µ –º–µ—Å—Ç–æ: <strong id="userRankPosition">-</strong></span>
                        </div>
                        <div class="widget-body">
                            <div class="rating-container">
                                <div class="rating-top3">
                                    <!-- 2 –º–µ—Å—Ç–æ -->
                                    <div class="top-card second">
                                        <div class="top-rank">2</div>
                                        <div class="top-avatar" id="top2Avatar">–ê–ò</div>
                                        <div class="top-name" id="top2Name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        <div class="top-points" id="top2Points">0 –æ—á–∫–æ–≤</div>
                                    </div>
                                    
                                    <!-- 1 –º–µ—Å—Ç–æ -->
                                    <div class="top-card first">
                                        <div class="top-rank">1</div>
                                        <div class="top-avatar" id="top1Avatar">–ú–ü</div>
                                        <div class="top-name" id="top1Name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        <div class="top-points" id="top1Points">0 –æ—á–∫–æ–≤</div>
                                    </div>
                                    
                                    <!-- 3 –º–µ—Å—Ç–æ -->
                                    <div class="top-card third">
                                        <div class="top-rank">3</div>
                                        <div class="top-avatar" id="top3Avatar">–î–°</div>
                                        <div class="top-name" id="top3Name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        <div class="top-points" id="top3Points">0 –æ—á–∫–æ–≤</div>
                                    </div>
                                </div>
                                
                                <div class="rating-full-list">
                                    <div class="rating-header">
                                        <div class="header-rank">#</div>
                                        <div class="header-name">–£—á–µ–Ω–∏–∫</div>
                                        <div class="header-points">–û—á–∫–∏</div>
                                        <div class="header-tasks">–ó–∞–¥–∞–Ω–∏—è</div>
                                    </div>
                                    <div class="rating-list" id="fullRatingList">
                                        <!-- –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –î—Ä—É–≥–∏–µ —Å–µ–∫—Ü–∏–∏ –±—É–¥—É—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ -->
            </div>
        </main>
    </div>

    <!-- –°–∏—Å—Ç–µ–º–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="system-navigation">
        <button class="nav-btn" onclick="window.location.href='index.html'">
            <i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è
        </button>
        <button class="nav-btn admin" onclick="goToAdmin()">
            <i class="fas fa-shield-alt"></i> –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
        </button>
        <button class="nav-btn logout" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
        </button>
    </div>

    <!-- JavaScript -->
    <script src="js/database.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        function goToAdmin() {
            const user = JSON.parse(localStorage.getItem('current_user') || '{}');
            if (user.role === 'admin') {
                localStorage.setItem('is_admin', 'true');
                window.location.href = 'admin.html';
            } else {
                const password = prompt('–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:');
                if (password === 'admin123') {
                    localStorage.setItem('is_admin', 'true');
                    window.location.href = 'admin.html';
                } else {
                    alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!');
                }
            }
        }
        
        function logout() {
            localStorage.removeItem('current_user');
            localStorage.removeItem('is_admin');
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
